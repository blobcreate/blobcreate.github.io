<!doctype html>
<html>
<head>
<link rel="stylesheet" href="./doc-styles/back-button-and-theme-selector.css">

<meta charset='UTF-8'><meta name='viewport' content='width=device-width initial-scale=1'>






<title>Manual</title>
</head>
<body class='typora-export typora-export-show-outline typora-export-no-collapse-outline'><div class='typora-export-content'>
<div class="typora-export-sidebar"><div class="outline-content">
<a href="/projectile-toolkit/docs" class="back-to-root">⏴ Docs</a><select class="theme-selector">
    <option value="gh">Github Light</option>
    <option value="dimmed">Dimmed</option>
    <option value="dark">Dark</option>
    <option selected value="mint-dark">Mint Dark</option>
</select>
<script>
function setCookie(name, value, days) {
    let expires = "";
    if (days) {
        let date = new Date();
        date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
        expires = "; expires=" + date.toUTCString();
    }
    document.cookie = name + "=" + (value || "")  + expires + "; path=/";
}

function getCookie(name) {
    let nameEQ = name + "=";
    let ca = document.cookie.split(';');
    for(let i=0; i < ca.length; i++) {
        let c = ca[i];
        while (c.charAt(0) == ' ') c = c.substring(1, c.length);
        if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);
    }
    return null;
}

function applyTheme(themePath) {
    themePath = './doc-styles/' + themePath + '.css';
    let themeLink = document.querySelector('link[data-theme]');
    if (!themeLink) {
        themeLink = document.createElement('link');
        themeLink.rel = 'stylesheet';
        themeLink.setAttribute('data-theme', 'true');
        document.head.appendChild(themeLink);
    }
    themeLink.href = themePath;
    if (themePath === './doc-styles/mint-dark.css') {
        const link = document.createElement('link');
        link.rel = 'stylesheet';
        link.type = 'text/css';
        link.href = 'https://fonts.googleapis.com/css2?family=Lexend:wght@300;700&family=Source+Code+Pro&display=swap';
        document.head.appendChild(link);
    }
}

const themeSelector = document.querySelector('.theme-selector');

themeSelector.addEventListener('change', (event) => {
    const newTheme = event.target.value;
    applyTheme(newTheme);
    setCookie('selectedTheme', newTheme, 365);
});

// On load
const savedTheme = getCookie('selectedTheme');
if (savedTheme) {
    applyTheme(savedTheme);
    themeSelector.value = savedTheme;
} else {
    applyTheme(themeSelector.value);
}
</script><li class="outline-item-wrapper outline-h1"><div class="outline-item"><span class="outline-expander"></span><a class="outline-label" href="#contents">Contents</a></div><ul class="outline-children"></ul></li><li class="outline-item-wrapper outline-h1"><div class="outline-item"><span class="outline-expander"></span><a class="outline-label" href="#api-example-use-cases">API example use cases</a></div><ul class="outline-children"><li class="outline-item-wrapper outline-h3"><div class="outline-item"><span class="outline-expander"></span><a class="outline-label" href="#targeting">Targeting</a></div><ul class="outline-children"></ul></li><li class="outline-item-wrapper outline-h3"><div class="outline-item"><span class="outline-expander"></span><a class="outline-label" href="#prediction">Prediction</a></div><ul class="outline-children"></ul></li></ul></li><li class="outline-item-wrapper outline-h1"><div class="outline-item"><span class="outline-expander"></span><a class="outline-label" href="#how-to-use">How to use</a></div><ul class="outline-children"><li class="outline-item-wrapper outline-h3"><div class="outline-item"><span class="outline-expander"></span><a class="outline-label" href="#targeting-2">Targeting</a></div><ul class="outline-children"></ul></li><li class="outline-item-wrapper outline-h3"><div class="outline-item"><span class="outline-expander"></span><a class="outline-label" href="#trajectory-prediction">Trajectory prediction</a></div><ul class="outline-children"></ul></li></ul></li><li class="outline-item-wrapper outline-h1"><div class="outline-item"><span class="outline-expander"></span><a class="outline-label" href="#explore-the-demos">Explore the demos</a></div><ul class="outline-children"><li class="outline-item-wrapper outline-h3"><div class="outline-item"><span class="outline-expander"></span><a class="outline-label" href="#online">Online</a></div><ul class="outline-children"></ul></li><li class="outline-item-wrapper outline-h3"><div class="outline-item"><span class="outline-expander"></span><a class="outline-label" href="#in-editor">In editor</a></div><ul class="outline-children"></ul></li><li class="outline-item-wrapper outline-h3"><div class="outline-item"><span class="outline-expander"></span><a class="outline-label" href="#relation">Relation</a></div><ul class="outline-children"></ul></li></ul></li></div></div><div id='write'  class=''><p><span>Projectile Toolkit  &gt;  Targeting and Prediction</span>
<span>Version 3.1</span></p><p>&nbsp;</p><h1 id='contents'><span>Contents</span></h1><div class='md-toc' mdtype='toc'><p class="md-toc-content" role="list"><span role="listitem" class="md-toc-item md-toc-h1" data-ref="n3"><a class="md-toc-inner" href="#contents">Contents</a></span><span role="listitem" class="md-toc-item md-toc-h1" data-ref="n5"><a class="md-toc-inner" href="#api-example-use-cases">API example use cases</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n8"><a class="md-toc-inner" href="#targeting">Targeting</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n35"><a class="md-toc-inner" href="#prediction">Prediction</a></span><span role="listitem" class="md-toc-item md-toc-h1" data-ref="n53"><a class="md-toc-inner" href="#how-to-use">How to use</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n59"><a class="md-toc-inner" href="#targeting-2">Targeting</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n79"><a class="md-toc-inner" href="#trajectory-prediction">Trajectory prediction</a></span><span role="listitem" class="md-toc-item md-toc-h1" data-ref="n137"><a class="md-toc-inner" href="#explore-the-demos">Explore the demos</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n139"><a class="md-toc-inner" href="#online">Online</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n142"><a class="md-toc-inner" href="#in-editor">In editor</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n180"><a class="md-toc-inner" href="#relation">Relation</a></span></p></div><h1 id='api-example-use-cases'><span>API example use cases</span></h1><p>&nbsp;</p><p><span>Targeting and Prediction API provides various algorithms to meet the needs of different scenarios, here are some example use cases:</span></p><h3 id='targeting'><span>Targeting</span></h3><figure class='table-figure'><table><thead><tr><th style='text-align:right;' ><span>Method</span></th><th><span>Example use case</span></th></tr></thead><tbody><tr><td style='text-align:right;' ><span>VelocityByA</span></td><td><span>This method automatically adapts max height of the trajectory according to the distance to the target. Great for human-like throwing/jumping behavior, and projectile launch calculation in 3D top-down shooters.</span></td></tr><tr><td style='text-align:right;' ><span>VelocityByAngle</span></td><td><span>Launch projectiles to hit a target with a specific elevation angle.</span></td></tr><tr><td style='text-align:right;' ><span>VelocityByTime</span></td><td><span>Let archers to accurately hit moving targets.</span></td></tr><tr><td style='text-align:right;' ><span>VelocityByHeight</span></td><td><span>Use in animations, or achieve realistic NavMesh Link movement, or achieve jump pad mechanism.</span></td></tr><tr><td style='text-align:right;' ><span>AnglesBySpeed</span></td><td><span>Simulate weapons that has a specific launch speed, such as cannon and mortar.</span></td></tr><tr><td style='text-align:right;' ><span>VelocitiesBySpeed</span></td><td><span>An extended version of AnglesBySpeed. It is more convenient than AnglesBySpeed when the rotation is not separated into y axis and x axis, such as hand-held mortar and bow.</span></td></tr><tr><td style='text-align:right;' ><span>ElevationalReach</span></td><td><span>Display the weapon’s maximum attack range.</span></td></tr></tbody></table></figure><p>&nbsp;</p><h3 id='prediction'><span>Prediction</span></h3><figure class='table-figure'><table><thead><tr><th style='text-align:right;' ><span>Method</span></th><th><span>Example use case</span></th></tr></thead><tbody><tr><td style='text-align:right;' ><span>PositionAtTime</span></td><td><span>Implement anti-ballistic missile (use this method to predict the position of the hostile projectile after </span><em><span>x</span></em><span> seconds, and use VelocityByTime(..., </span><em><span>x</span></em><span>) to launch the anti-ballistic missile).</span></td></tr><tr><td style='text-align:right;' ><span>Positions</span></td><td><span>Predict the trajectory of a projectile. (You can use </span><strong><span>TrajectoryPredictor</span></strong><span> component instead, it has trajectory rendering implemented.)</span></td></tr><tr><td style='text-align:right;' ><span>VerticalFlightTest</span></td><td><span>Predict the flight time of a projectile when the x and z coordinates of the target are unkown, but the elevation of the target is known.</span></td></tr><tr><td style='text-align:right;' ><span>FlightTest</span></td><td><span>Test if a certain velocity will allow a projectile to hit the target.</span></td></tr></tbody></table></figure><p>&nbsp;</p><h1 id='how-to-use'><span>How to use</span></h1><p>&nbsp;</p><div class="md-alert md-alert-important important"><p><span class='md-alert-text md-alert-text-important'><svg viewBox="0 0 16 16" version="1.1" width="1em" height="1em" aria-hidden="true"><path d="M0 1.75C0 .784.784 0 1.75 0h12.5C15.216 0 16 .784 16 1.75v9.5A1.75 1.75 0 0 1 14.25 13H8.06l-2.573 2.573A1.458 1.458 0 0 1 3 14.543V13H1.75A1.75 1.75 0 0 1 0 11.25Zm1.75-.25a.25.25 0 0 0-.25.25v9.5c0 .138.112.25.25.25h2a.75.75 0 0 1 .75.75v2.19l2.72-2.72a.749.749 0 0 1 .53-.22h6.5a.25.25 0 0 0 .25-.25v-9.5a.25.25 0 0 0-.25-.25Zm7 2.25v2.5a.75.75 0 0 1-1.5 0v-2.5a.75.75 0 0 1 1.5 0ZM9 9a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z"></path></svg>Important</span><br></p><p><span>Add </span><code>using Blobcreate.ProjectileToolkit;</code><span> in your scripts to be able to call the APIs.</span></p></div><p>&nbsp;</p><h3 id='targeting-2'><span>Targeting</span></h3><p><span>To launch a projectile to hit a target:</span></p><ol start='' ><li><p><span>Add a </span><em><span>Collider</span></em><span> and a </span><em><span>Rigidbody</span></em><span> to your prefab if it doesn&#39;t have one (you can set Interpolate to Interpolate and set Collision Detection to Continuous Dynamic to get the best result),</span></p></li><li><p><span>In your code, instantiate the prefab,</span></p></li><li><p><span>Call one of the targeting algorithms to calculate the launch velocity, and apply it using </span><code>AddForce(...)</code><span>.</span></p></li></ol><p><span>The targeting algorithms are all static methods so the integration is very flexible.</span></p><p><strong><span>Example code</span></strong></p><p><span>Take </span><code>VelocityByTime(...)</code><span> for example, if you want AI units to accurately striking moving objects:</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="c#"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="c#"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 25.09375px; left: 18px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-variable">SerializeField</span>] <span class="cm-variable">Rigidbody</span> <span class="cm-variable">projectilePrefab</span>;</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-variable">SerializeField</span>] <span class="cm-variable">Transform</span> <span class="cm-variable">launchPoint</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-variable">SerializeField</span>] <span class="cm-variable-3">float</span> <span class="cm-variable">timeOfFlight</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">...</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">// In your own method:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">var</span> <span class="cm-def">myRigid</span> <span class="cm-operator">=</span> <span class="cm-variable">Instantiate</span>(<span class="cm-variable">projectilePrefab</span>, <span class="cm-variable">launchPoint</span>, <span class="cm-variable">launchPoint</span>.<span class="cm-variable">rotation</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">var</span> <span class="cm-def">v</span> <span class="cm-operator">=</span> <span class="cm-variable">Projectile</span>.<span class="cm-variable">VelocityByTime</span>(<span class="cm-variable">myRigid</span>.<span class="cm-variable">position</span>, <span class="cm-variable">predictedPos</span>, <span class="cm-variable">timeOfFlight</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">myRigid</span>.<span class="cm-variable">AddForce</span>(<span class="cm-variable">v</span>, <span class="cm-variable">ForceMode</span>.<span class="cm-variable">VelocityChange</span>);</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 168px;"></div><div class="CodeMirror-gutters" style="display: none; height: 168px;"></div></div></div></pre><p><span>View </span><code>Defender.cs</code><span> for the whole implementation of this (how to calculate </span><code>predictedPos</code><span>, etc.).</span></p><p><span>Additionally, you can add a </span><em><span>SimpleExplosive</span></em><span> component to your prefab, it handles collision events, explosion VFX, explosion force, and damage. Add the following logic below the above lines to make it work properly (for the above example, </span><code>targetPosition</code><span> is </span><code>predictedPos</code><span>):</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="c#"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="c#"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 25.09375px; left: 18px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">myRigid</span>.<span class="cm-variable">GetComponent</span><span class="cm-operator">&lt;</span><span class="cm-variable">ProjectileBehaviour</span><span class="cm-operator">&gt;</span>().<span class="cm-variable">Launch</span>(<span class="cm-variable">targetPosition</span>);</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 21px;"></div><div class="CodeMirror-gutters" style="display: none; height: 21px;"></div></div></div></pre><p><strong><span>For 2D</span></strong></p><p><span>In 2D, everything is the same, except that </span><code>Rigidbody2D</code><span> does not have </span><code>ForceMode2D.VelocityChange</code><span> mode, so we use </span><code>ForceMode2D.Impulse</code><span> instead:</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="c#"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="c#"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 25.09375px; left: 18px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">myRigid2D</span>.<span class="cm-variable">AddForce</span>(<span class="cm-variable">myRigid2D</span>.<span class="cm-variable">mass</span> <span class="cm-operator">*</span> <span class="cm-variable">v</span>, <span class="cm-variable">ForceMode2D</span>.<span class="cm-variable">Impulse</span>);</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 21px;"></div><div class="CodeMirror-gutters" style="display: none; height: 21px;"></div></div></div></pre><p>&nbsp;</p><h3 id='trajectory-prediction'><span>Trajectory prediction</span></h3><p><span>There are 3 approaches to do trajectory prediction, here is a table that compares their pros and cons:</span></p><figure class='table-figure'><table><thead><tr><th style='text-align:right;' >&nbsp;</th><th><span>Projectile.Positions(...)</span></th><th><span>TrajectoryPredictor</span></th><th><span>PEBTrajectoryPredictor</span></th></tr></thead><tbody><tr><td style='text-align:right;' ><span>Description</span></td><td><span>Low-level method that returns an array of Vector3 representing the points of the trajectory.</span></td><td><span>Component that handles calculation and rendering of trajectory.</span></td><td><span>Component that handles calculation and rendering of trajectory. The calculation uses the physics engine.</span></td></tr><tr><td style='text-align:right;' ><span>Calculation</span></td><td><span>Algorithmic; Non-iterative</span><sup><span>*</span></sup></td><td><span>Algorithmic; Non-iterative</span><sup><span>*</span></sup></td><td><span>Physics-engine based; Iterative</span></td></tr><tr><td style='text-align:right;' ><span>Collisions and Bounces</span></td><td><span>No</span></td><td><span>No (collision is planned)</span></td><td><span>Yes, accurate bounces</span></td></tr><tr><td style='text-align:right;' ><span>Aerodynamic Move</span></td><td><span>No</span></td><td><span>No (planned)</span></td><td><span>Yes</span></td></tr><tr><td style='text-align:right;' ><span>Performance</span></td><td><span>High</span></td><td><span>High</span></td><td><span>Medium</span></td></tr><tr><td style='text-align:right;' ><span>Usage</span></td><td><a href='https://blobcreate.github.io/projectile-toolkit/docs/Scripting%20Reference.html#positions' target='_blank'><span>Link</span></a></td><td><span>See below</span></td><td><a href='https://blobcreate.github.io/projectile-toolkit/docs/PEB%20Trajectory%20Predictor.html' target='_blank'><span>Link</span></a></td></tr></tbody></table></figure><p><span>*</span><span> For example, with </span><em><span>TrajectoryPredictor</span></em><span> you can calculate just 10 points to represent a 10-km trajectory, those 10 points will be accurate. This can&#39;t be done with </span><em><span>PEBTrajectoryPredictor</span></em><span> because it calculates one point per deltaTime.</span></p><div class="md-alert md-alert-important important"><p><span class='md-alert-text md-alert-text-important'><svg viewBox="0 0 16 16" version="1.1" width="1em" height="1em" aria-hidden="true"><path d="M0 1.75C0 .784.784 0 1.75 0h12.5C15.216 0 16 .784 16 1.75v9.5A1.75 1.75 0 0 1 14.25 13H8.06l-2.573 2.573A1.458 1.458 0 0 1 3 14.543V13H1.75A1.75 1.75 0 0 1 0 11.25Zm1.75-.25a.25.25 0 0 0-.25.25v9.5c0 .138.112.25.25.25h2a.75.75 0 0 1 .75.75v2.19l2.72-2.72a.749.749 0 0 1 .53-.22h6.5a.25.25 0 0 0 .25-.25v-9.5a.25.25 0 0 0-.25-.25Zm7 2.25v2.5a.75.75 0 0 1-1.5 0v-2.5a.75.75 0 0 1 1.5 0ZM9 9a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z"></path></svg>Important</span><br></p><p><span>⚠️ If you encounter that the trajectory is not showing, search the following materials in the Project panel and click on them one by one, and the problem should be fixed: &quot;Dash Line&quot;, &quot;Slash Line&quot;, &quot;SquareParticle&quot;. (This is a Unity Editor bug.)</span></p></div><p>&nbsp;</p><p><strong><span>How to use </span><em><span>TrajectoryPredictor</span></em></strong></p><ol start='' ><li><p><span>Drag and drop the prefab &quot;Trajectory Predictor.prefab&quot; in folder &quot;Blobcreate/Projectile Toolkit/Prefabs&quot; into your scene,</span></p></li><li><p><span>In your script, add the following logic:</span></p></li></ol><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="c#"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="c#"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 25.09375px; left: 18px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-variable">SerializeField</span>] <span class="cm-variable">TrajectoryPredictor</span> <span class="cm-variable">tp</span>;</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">...</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">// Update() or your own method</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">void</span> <span class="cm-variable">Update</span>()</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">// Call Render to update the positions of the line.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">tp</span>.<span class="cm-variable">Render</span>(<span class="cm-variable">launchPosition</span>, <span class="cm-variable">launchVelocity</span>, <span class="cm-variable">distanceOrEnd</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 168px;"></div><div class="CodeMirror-gutters" style="display: none; height: 168px;"></div></div></div></pre><p><span>Or if you want to predict the trajectory of a moving rigidbody:</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="c#"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="c#"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 25.09375px; left: 18px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">tp</span>.<span class="cm-variable">Render</span>(<span class="cm-variable">myRigid</span>.<span class="cm-variable">transform</span>.<span class="cm-variable">position</span>, <span class="cm-variable">myRigid</span>.<span class="cm-variable">velocity</span>, <span class="cm-variable">distanceOrEnd</span>);</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 21px;"></div><div class="CodeMirror-gutters" style="display: none; height: 21px;"></div></div></div></pre><div class="md-alert md-alert-note note"><p><span class='md-alert-text md-alert-text-note'><svg viewBox="0 0 16 16" version="1.1" width="1em" height="1em" aria-hidden="true"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</span><br></p><p><span>&quot;distanceOrEnd&quot; here means that you can either put &quot;distance (float)&quot;, or &quot;end (Vector3)&quot; end point of the trajectory (if known), to control the length of the predicted trajectory line.</span></p></div><p>&nbsp;</p><h1 id='explore-the-demos'><span>Explore the demos</span></h1><p>&nbsp;</p><h3 id='online'><span>Online</span></h3><p><a href='https://blobcreate.itch.io/demos-for-projectile-toolkit'><span>Click here</span></a><span> to play the online version (WebGL).</span></p><p>&nbsp;</p><h3 id='in-editor'><span>In editor</span></h3><p><span>You can explore the demos under the folder &quot;Blobcreate/Projectile Toolkit/Demos&quot;.</span></p><p><span>Some setup is required:</span></p><p>&nbsp;</p><p><strong><span>1. Upgrade materials</span></strong></p><p><span>The materials are Built-in Render Pipeline materials. If you are using Scriptable Render Pipeline, you can convert the materials easily:</span></p><ul><li><p><span>URP: for newer versions: </span><a href='https://docs.unity3d.com/Packages/com.unity.render-pipelines.universal@12.1/manual/features/rp-converter.html'><span>URP 12.0+</span></a><span>, for older versions: </span><a href='https://docs.unity3d.com/Packages/com.unity.render-pipelines.universal@7.7/manual/upgrading-your-shaders.html#:~:text=custom%20shaders.-,To%20convert,-the%20built%2Din'><span>URP</span></a></p><p><span>(Optional): import native URP unlit materials from &quot;Blobcreate/Projectile Toolkit/Materials/URP Unlit Materials.unitypackage&quot;. Double click on it and import, the corresponding materials will be overriden and updated.</span></p></li><li><p><span>HDRP: for newer versions: </span><a href='https://docs.unity3d.com/Packages/com.unity.render-pipelines.high-definition@12.1/manual/Upgrading-To-HDRP.html#upgrading-materials'><span>HDRP 12.0+</span></a><span>, for older versions: </span><a href='https://docs.unity3d.com/Packages/com.unity.render-pipelines.high-definition@7.7/manual/Upgrading-To-HDRP.html#upgrading-materials'><span>HDRP</span></a></p></li><li><p><span>Custom RP: manually replace these materials with the equivalent shaders in your RP.</span></p></li></ul><div class="md-alert md-alert-important important"><p><span class='md-alert-text md-alert-text-important'><svg viewBox="0 0 16 16" version="1.1" width="1em" height="1em" aria-hidden="true"><path d="M0 1.75C0 .784.784 0 1.75 0h12.5C15.216 0 16 .784 16 1.75v9.5A1.75 1.75 0 0 1 14.25 13H8.06l-2.573 2.573A1.458 1.458 0 0 1 3 14.543V13H1.75A1.75 1.75 0 0 1 0 11.25Zm1.75-.25a.25.25 0 0 0-.25.25v9.5c0 .138.112.25.25.25h2a.75.75 0 0 1 .75.75v2.19l2.72-2.72a.749.749 0 0 1 .53-.22h6.5a.25.25 0 0 0 .25-.25v-9.5a.25.25 0 0 0-.25-.25Zm7 2.25v2.5a.75.75 0 0 1-1.5 0v-2.5a.75.75 0 0 1 1.5 0ZM9 9a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z"></path></svg>Important</span><br></p><p><span>⚠️ If you encounter that the trajectory is not showing, search the following materials in the Project panel and click on them one by one, and the problem should be fixed: &quot;Dash Line&quot;, &quot;Slash Line&quot;, &quot;SquareParticle&quot;. (This is a Unity Editor bug.)</span></p></div><p>&nbsp;</p><p><strong><span>2. Visual setup (optional)</span></strong></p><p><span>If your project uses URP but there are rendering problems with demo scenes you can use &quot;PTK-URP-HighQuality&quot; render pipeline asset.</span></p><p>&nbsp;</p><p><strong><span>3. Set up layers and physics</span></strong></p><div class="md-alert md-alert-tip tip"><p><span class='md-alert-text md-alert-text-tip'><svg viewBox="0 0 16 16" version="1.1" width="1em" height="1em" aria-hidden="true"><path d="M8 1.5c-2.363 0-4 1.69-4 3.75 0 .984.424 1.625.984 2.304l.214.253c.223.264.47.556.673.848.284.411.537.896.621 1.49a.75.75 0 0 1-1.484.211c-.04-.282-.163-.547-.37-.847a8.456 8.456 0 0 0-.542-.68c-.084-.1-.173-.205-.268-.32C3.201 7.75 2.5 6.766 2.5 5.25 2.5 2.31 4.863 0 8 0s5.5 2.31 5.5 5.25c0 1.516-.701 2.5-1.328 3.259-.095.115-.184.22-.268.319-.207.245-.383.453-.541.681-.208.3-.33.565-.37.847a.751.751 0 0 1-1.485-.212c.084-.593.337-1.078.621-1.489.203-.292.45-.584.673-.848.075-.088.147-.173.213-.253.561-.679.985-1.32.985-2.304 0-2.06-1.637-3.75-4-3.75ZM5.75 12h4.5a.75.75 0 0 1 0 1.5h-4.5a.75.75 0 0 1 0-1.5ZM6 15.25a.75.75 0 0 1 .75-.75h2.5a.75.75 0 0 1 0 1.5h-2.5a.75.75 0 0 1-.75-.75Z"></path></svg>Tip</span><br></p><p><span>These settings are for the demo scenes, they are not required for your own scenes/projects. Backups are important if your project already has custom layers.</span></p></div><p><span>Back up your layer settings and physics settings, and apply the layer preset &quot;PTKLayers&quot; and physics preset &quot;PTKPhysics&quot; under &quot;.../Demos/Other Assets/Settings&quot;. Detailed steps:</span></p><ol start='' ><li><p><span>(At the top right of Unity editor) select &quot;Layers &gt; Edit Layers...&quot;,</span></p></li><li><p><span>Click the second icon in the top right of the inspector,</span></p></li><li><p><span>Click &quot;Save current to...&quot; button to back up your current layer settings,</span></p></li><li><p><span>Click that second icon again and then choose &quot;PTKLayers&quot; in the pop up window.</span></p></li></ol><p><span>In Unity 6 and above, in physics settings, the layer collision matrix should be manually set to the same as below. Also, set the Gravity to (0, -29.43, 0).</span></p><p><img src="../images/physics-settings.png"></p><p>&nbsp;</p><h3 id='relation'><span>Relation</span></h3><p><span>Which scene demonstrates which algorithm? The relation is shown in the table below:</span></p><figure class='table-figure'><table><thead><tr><th style='text-align:right;' ><span>Method</span></th><th style='text-align:left;' ><span>Scene Index(es) / </span><code>class(es)</code></th></tr></thead><tbody><tr><td style='text-align:right;' ><span>VelocityByA</span></td><td style='text-align:left;' ><span>02 / </span><code>JumpAttacker</code><span> </span><code>ProjectileLauncher</code></td></tr><tr><td style='text-align:right;' ><span>VelocityByAngle</span></td><td style='text-align:left;' ><span>03 / </span><code>CannonLike</code></td></tr><tr><td style='text-align:right;' ><span>VelocityByTime</span></td><td style='text-align:left;' ><span>02 / </span><code>Defender</code></td></tr><tr><td style='text-align:right;' ><span>VelocityByHeight</span></td><td style='text-align:left;' ><span>00 / </span><code>JumpTester</code><span>, 01 / </span><code>NMJump</code><span>, 02 / </span><code>JumpAttacker</code></td></tr><tr><td style='text-align:right;' ><span>AnglesBySpeed</span></td><td style='text-align:left;' ><span>03 / </span><code>CannonLike</code></td></tr><tr><td style='text-align:right;' ><span>VelocitiesBySpeed</span></td><td style='text-align:left;' ><span>03 / </span><code>CannonLike</code></td></tr><tr><td style='text-align:right;' ><span>PositionAtTime</span></td><td style='text-align:left;' ><span>Demo coming soon</span></td></tr><tr><td style='text-align:right;' ><span>Positions</span></td><td style='text-align:left;' ><span>Used in </span><em><span>TrajectoryPredictor</span></em><span> component.</span></td></tr><tr><td style='text-align:right;' ><span>ElevationalReach</span></td><td style='text-align:left;' ><span>03 / </span><code>CannonLike</code></td></tr><tr><td style='text-align:right;' ><span>VerticalFlightTest</span></td><td style='text-align:left;' ><span>Used in FlightTest(...) method.</span></td></tr><tr><td style='text-align:right;' ><span>FlightTest</span></td><td style='text-align:left;' ><span>03 / </span><code>CannonLike</code></td></tr></tbody></table></figure><p><span>For </span><em><span>TrajectoryPredictor</span></em><span> component, the demo scene is 02.</span>
<span>For other features, you can find the corresponding demo scenes by their names.</span></p><div class="md-alert md-alert-tip tip"><p><span class='md-alert-text md-alert-text-tip'><svg viewBox="0 0 16 16" version="1.1" width="1em" height="1em" aria-hidden="true"><path d="M8 1.5c-2.363 0-4 1.69-4 3.75 0 .984.424 1.625.984 2.304l.214.253c.223.264.47.556.673.848.284.411.537.896.621 1.49a.75.75 0 0 1-1.484.211c-.04-.282-.163-.547-.37-.847a8.456 8.456 0 0 0-.542-.68c-.084-.1-.173-.205-.268-.32C3.201 7.75 2.5 6.766 2.5 5.25 2.5 2.31 4.863 0 8 0s5.5 2.31 5.5 5.25c0 1.516-.701 2.5-1.328 3.259-.095.115-.184.22-.268.319-.207.245-.383.453-.541.681-.208.3-.33.565-.37.847a.751.751 0 0 1-1.485-.212c.084-.593.337-1.078.621-1.489.203-.292.45-.584.673-.848.075-.088.147-.173.213-.253.561-.679.985-1.32.985-2.304 0-2.06-1.637-3.75-4-3.75ZM5.75 12h4.5a.75.75 0 0 1 0 1.5h-4.5a.75.75 0 0 1 0-1.5ZM6 15.25a.75.75 0 0 1 .75-.75h2.5a.75.75 0 0 1 0 1.5h-2.5a.75.75 0 0 1-.75-.75Z"></path></svg>Tip</span><br></p><p><span>The script filenames of the classes are </span><code>class</code><span> + </span><code>.cs</code><span>. You can find them under the folder &quot;Blobcreate/Projectile Toolkit/Demos/Scripts&quot;.</span></p></div><p>&nbsp;</p><p>&nbsp;</p></div></div>

<script>(function(){var e=document.body.parentElement,t=[],n=null,i=document.body.classList.contains("typora-export-collapse-outline"),r=function(e,t,n){document.addEventListener(e,function(e){if(!e.defaultPrevented)for(var i=e.target;i&&i!=this;i=i.parentNode)if(i.matches(t)){!1===n.call(i,e)&&(e.preventDefault(),e.stopPropagation());break}},!1)};function o(){return e.scrollTop}r("click",".outline-expander",function(e){var t=this.closest(".outline-item-wrapper").classList;return t.contains("outline-item-open")?t.remove("outline-item-open"):t.add("outline-item-open"),d(),!1}),r("click",".outline-item",function(e){var t=this.querySelector(".outline-label");if(location.hash=t.getAttribute("href"),i){var n=this.closest(".outline-item-wrapper").classList;n.contains("outline-item-open")||n.add("outline-item-open"),c(),n.add("outline-item-active")}});var a,s,l=function(){var e=o();n=null;for(var i=0;i<t.length&&t[i][1]-e<60;i++)n=t[i]},c=function(){document.querySelectorAll(".outline-item-active").forEach(e=>e.classList.remove("outline-item-active")),document.querySelectorAll(".outline-item-single.outline-item-open").forEach(e=>e.classList.remove("outline-item-open"))},d=function(){if(n){c();var e=document.querySelector('.outline-label[href="#'+(CSS.escape?CSS.escape(n[0]):n[0])+'"]');if(e)if(i){var t=e.closest(".outline-item-open>ul>.outline-item-wrapper");if(t)t.classList.add("outline-item-active");else{for(var r=(e=e.closest(".outline-item-wrapper")).parentElement.closest(".outline-item-wrapper");r;)r=(e=r).parentElement.closest(".outline-item-wrapper");e.classList.add("outline-item-active")}}else e.closest(".outline-item-wrapper").classList.add("outline-item-active")}};window.addEventListener("scroll",function(e){a&&clearTimeout(a),a=setTimeout(function(){l(),d()},300)});var u=function(){s=setTimeout(function(){!function(){t=[];var e=o();document.querySelector("#write").querySelectorAll("h1, h2, h3, h4, h5, h6").forEach(n=>{var i=n.getAttribute("id");t.push([i,e+n.getBoundingClientRect().y])})}(),l(),d()},300)};window.addEventListener("resize",function(e){s&&clearTimeout(s),u()}),u()})();</script></body>
</html>